{
  "name": "knot",
  "description": "Compiler for the Knot programming language",
  "version": "0.0.0",
  "esy": {
    "build": "dune build -p knot",
    "buildDev": "pesy",
    "release": {
      "bin": [
        "knotc.exe"
      ],
      "rewritePrefix": true
    }
  },
  "buildDirs": {
    "test/util": {
      "require": [
        "alcotest",
        "alcotest-lwt",
        "lwt",
        "lwt.unix"
      ],
      "name": "knot.test",
      "namespace": "Test"
    },
    "test/pretty": {
      "require": [
        "knot.test",
        "knot.lib"
      ],
      "name": "knot.pretty_test",
      "namespace": "TestPretty"
    },
    "test/library": {
      "require": [
        "knot.test",
        "knot.lib"
      ],
      "name": "knot.lib_test",
      "namespace": "TestLibrary"
    },
    "test/analyze": {
      "require": [
        "knot.test",
        "knot.lib_test",
        "knot.grammar"
      ],
      "name": "knot.analyze_test",
      "namespace": "TestAnalyze"
    },
    "test/file": {
      "require": [
        "knot.test",
        "knot.lib_test",
        "knot.file"
      ],
      "name": "knot.file_test",
      "namespace": "TestFile"
    },
    "test/grammar": {
      "require": [
        "knot.test",
        "knot.lib_test",
        "knot.grammar",
        "knot.parse",
        "knot.file"
      ],
      "name": "knot.grammar_test",
      "namespace": "TestGrammar"
    },
    "test/resolve": {
      "require": [
        "knot.test",
        "knot.lib_test",
        "knot.file_test",
        "knot.grammar_test",
        "knot.resolve",
        "knot.grammar"
      ],
      "name": "knot.resolve_test",
      "namespace": "TestResolve"
    },
    "test/parse": {
      "require": [
        "knot.test",
        "knot.parse"
      ],
      "name": "knot.parse_test",
      "namespace": "TestParse"
    },
    "test/generate": {
      "require": [
        "knot.test",
        "knot.lib_test",
        "knot.grammar_test",
        "knot.generate"
      ],
      "name": "knot.generate_test",
      "namespace": "TestGenerate"
    },
    "test/compile": {
      "require": [
        "knot.test",
        "knot.resolve_test",
        "knot.compile"
      ],
      "name": "knot.compile_test",
      "namespace": "TestCompile"
    },
    "test/executable": {
      "require": [
        "knot.test",
        "knot.file_test",
        "knot.exec"
      ],
      "name": "knot.exec_test",
      "namespace": "TestExecutable"
    },
    "test/language_server": {
      "require": [
        "knot.test",
        "knot.resolve_test",
        "knot.language_server"
      ],
      "name": "knot.language_server_test",
      "namespace": "TestLanguageServer"
    },
    "test/build_server": {
      "require": [
        "knot.test",
        "knot.resolve_test",
        "knot.build_server"
      ],
      "name": "knot.build_server_test",
      "namespace": "TestBuildServer"
    },
    "test/unit": {
      "require": [
        "knot.pretty_test",
        "knot.lib_test",
        "knot.analyze_test",
        "knot.file_test",
        "knot.grammar_test",
        "knot.resolve_test",
        "knot.parse_test",
        "knot.generate_test",
        "knot.compile_test",
        "knot.language_server_test",
        "knot.exec_test"
      ],
      "main": "TestSuite",
      "name": "UnitTests.exe"
    },
    "test/integration": {
      "require": [
        "knot.file_test",
        "knot.exec_test"
      ],
      "main": "TestSuite",
      "name": "IntegrationTests.exe"
    },
    "test/e2e": {
      "require": [
        "knot.file_test",
        "knot.exec_test",
        "knot.resource"
      ],
      "main": "TestSuite",
      "name": "E2ETests.exe"
    },
    "src/pretty": {
      "require": [
        "ANSITerminal",
        "fmt"
      ],
      "name": "knot.pretty",
      "namespace": "Pretty"
    },
    "src/library": {
      "require": [
        "ANSITerminal",
        "dolog",
        "fmt",
        "lwt",
        "lwt.unix",
        "tablecloth-native",
        "knot.pretty"
      ],
      "name": "knot.lib",
      "namespace": "Knot"
    },
    "src/jsonrpc": {
      "require": [
        "knot.lib",
        "yojson"
      ],
      "name": "knot.jsonrpc",
      "namespace": "JSONRPC"
    },
    "src/analyze": {
      "require": [
        "knot.parse"
      ],
      "name": "knot.analyze",
      "namespace": "Analyze"
    },
    "src/grammar": {
      "require": [
        "knot.analyze"
      ],
      "name": "knot.grammar",
      "namespace": "Grammar"
    },
    "src/file": {
      "require": [
        "knot.lib",
        "fileutils",
        "uutf",
        "fswatch",
        "fswatch_lwt"
      ],
      "name": "knot.file",
      "namespace": "File"
    },
    "src/resolve": {
      "require": [
        "knot.file"
      ],
      "name": "knot.resolve",
      "namespace": "Resolve"
    },
    "src/parse": {
      "require": [
        "knot.lib"
      ],
      "name": "knot.parse",
      "namespace": "Parse"
    },
    "src/generate": {
      "require": [
        "knot.grammar"
      ],
      "name": "knot.generate",
      "namespace": "Generate"
    },
    "src/compile": {
      "require": [
        "knot.file",
        "knot.resolve",
        "knot.generate"
      ],
      "name": "knot.compile",
      "namespace": "Compile"
    },
    "src/language_server": {
      "require": [
        "knot.compile",
        "knot.jsonrpc"
      ],
      "name": "knot.language_server",
      "namespace": "LanguageServer"
    },
    "src/build_server": {
      "require": [
        "knot.compile",
        "knot.jsonrpc"
      ],
      "name": "knot.build_server",
      "namespace": "BuildServer"
    },
    "src/executable": {
      "require": [
        "knot.build_server",
        "knot.language_server",
        "knot.resource",
        "yaml"
      ],
      "name": "knot.exec",
      "namespace": "Executable"
    },
    "src/resource": {
      "require": [
        "knot.lib",
        "dune-site"
      ],
      "name": "knot.resource",
      "namespace": "Resource",
      "rawBuildConfigFooter": [
        "(install",
        "  (package knot)",
        "  (section (site (knot assets)))",
        "  (files ",
        "    (assets/stdlib.kd as stdlib.kd)",
        "  )",
        ")",
        "(generate_sites_module",
        "  (module Injected)",
        "  (sites knot)",
        "  (sourceroot)",
        ")"
      ]
    },
    "src/cli": {
      "require": [
        "knot.exec",
        "knot.resource",
        "dune-site"
      ],
      "main": "Main",
      "name": "knotc.exe"
    }
  },
  "scripts": {
    "build_test": "esy build && esy test",
    "dev": "sane 'esy build' --glob='(library|lexer|parser|analyzer|resolver|generator|compiler|executable)/**/*.re'",
    "pesy": "bash -c 'env PESY_MODE=update pesy'",
    "server": "esy x knotc.exe -server -config ./test/resources/project",
    "test": "npm run test.unit && npm run test.integration && npm run test.e2e && npm run test.smoke 1> /dev/null",
    "test.unit": "esy x UnitTests.exe --show-errors",
    "test.integration": "esy x IntegrationTests.exe --show-errors",
    "test.e2e": "esy x E2ETests.exe --show-errors",
    "test.smoke": "esy x knotc.exe build --cwd ./test/smoke/.fixtures/project",
    "test.smoke.debug": "npm run test:smoke -- -debug"
  },
  "dependencies": {
    "@esy-ocaml/reason": "*",
    "@opam/ANSITerminal": "0.8.2",
    "@opam/alcotest": "1.5.0",
    "@opam/alcotest-lwt": "1.5.0",
    "@opam/dolog": "6.0.0",
    "@opam/dune": "3.2.0",
    "@opam/dune-site": "3.2.0",
    "@opam/fileutils": "0.6.3",
    "@opam/fmt": "0.8.9",
    "@opam/fswatch": "11-0.1.0",
    "@opam/fswatch_lwt": "11-0.1.0",
    "@opam/lwt": "5.4.0",
    "@opam/tablecloth-native": "0.0.7",
    "@opam/uutf": "1.0.2",
    "@opam/yaml": "2.1.0",
    "@opam/yojson": "1.7.0"
  },
  "devDependencies": {
    "@opam/merlin": "*",
    "ocaml": "4.10.1002",
    "pesy": "*",
    "refmterr": "*"
  }
}
