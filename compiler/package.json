{
  "name": "knot",
  "description": "Compiler for the Knot programming language",
  "version": "0.0.0",
  "esy": {
    "build": "dune build -p knot",
    "buildDev": "pesy",
    "release": {
      "bin": [
        "knotc.exe"
      ],
      "rewritePrefix": true
    }
  },
  "buildDirs": {
    "src/library": {
      "require": [
        "dolog",
        "tablecloth-native",
        "lwt",
        "lwt.unix",
        "ANSITerminal"
      ],
      "name": "knot.lib",
      "namespace": "Knot"
    },
    "src/grammar": {
      "require": [
        "knot.parse"
      ],
      "name": "knot.grammar",
      "namespace": "Grammar"
    },
    "src/file": {
      "require": [
        "knot.lib",
        "fileutils",
        "uutf",
        "fswatch",
        "fswatch_lwt"
      ],
      "name": "knot.file",
      "namespace": "File"
    },
    "src/resolve": {
      "require": [
        "knot.file"
      ],
      "name": "knot.resolve",
      "namespace": "Resolve"
    },
    "src/parse": {
      "require": [
        "knot.lib"
      ],
      "name": "knot.parse",
      "namespace": "Parse"
    },
    "src/generate": {
      "require": [
        "knot.grammar"
      ],
      "name": "knot.generate",
      "namespace": "Generate"
    },
    "src/compile": {
      "require": [
        "knot.file",
        "knot.resolve",
        "knot.generate"
      ],
      "name": "knot.compile",
      "namespace": "Compile"
    },
    "src/executable": {
      "require": [
        "knot.compile"
      ],
      "name": "knot.exec",
      "namespace": "Executable"
    },
    "src/cli": {
      "require": [
        "knot.exec"
      ],
      "main": "Main",
      "name": "knotc.exe"
    },
    "test/util": {
      "require": [
        "alcotest",
        "lwt",
        "lwt.unix"
      ],
      "name": "knot.test",
      "namespace": "Test"
    },
    "test/library": {
      "require": [
        "knot.test",
        "knot.lib"
      ],
      "name": "knot.lib_test",
      "namespace": "TestLibrary"
    },
    "test/file": {
      "require": [
        "knot.test",
        "knot.file"
      ],
      "name": "knot.file_test",
      "namespace": "TestFile"
    },
    "test/grammar": {
      "require": [
        "knot.test",
        "knot.grammar",
        "knot.parse",
        "knot.file"
      ],
      "name": "knot.grammar_test",
      "namespace": "TestGrammar"
    },
    "test/resolve": {
      "require": [
        "knot.test",
        "knot.file_test",
        "knot.resolve",
        "knot.grammar"
      ],
      "name": "knot.resolve_test",
      "namespace": "TestResolve"
    },
    "test/parse": {
      "require": [
        "knot.test",
        "knot.parse"
      ],
      "name": "knot.parse_test",
      "namespace": "TestParse"
    },
    "test/generate": {
      "require": [
        "knot.test",
        "knot.lib_test",
        "knot.generate"
      ],
      "name": "knot.generate_test",
      "namespace": "TestGenerate"
    },
    "test/compile": {
      "require": [
        "knot.test",
        "knot.resolve_test",
        "knot.compile"
      ],
      "name": "knot.compile_test",
      "namespace": "TestCompile"
    },
    "test/executable": {
      "require": [
        "knot.test",
        "knot.file_test",
        "knot.exec"
      ],
      "name": "knot.exec_test",
      "namespace": "TestExecutable"
    },
    "test/unit": {
      "require": [
        "knot.lib_test",
        "knot.file_test",
        "knot.grammar_test",
        "knot.resolve_test",
        "knot.parse_test",
        "knot.generate_test",
        "knot.compile_test",
        "knot.exec_test"
      ],
      "main": "TestSuite",
      "name": "UnitTests.exe"
    },
    "test/integration": {
      "require": [
        "knot.file_test"
      ],
      "main": "TestSuite",
      "name": "IntegrationTests.exe"
    }
  },
  "scripts": {
    "build_test": "esy build && esy test",
    "dev": "sane 'esy build' --glob='(library|lexer|parser|analyzer|resolver|generator|compiler|executable)/**/*.re'",
    "pesy": "bash -c 'env PESY_MODE=update pesy'",
    "server": "esy x knotc.exe -server -config ./test/resources/project",
    "test": "npm run test.unit && npm run test.integration && npm run test:e2e 1> /dev/null",
    "test.unit": "esy x UnitTests.exe --show-errors",
    "test.integration": "esy x IntegrationTests.exe --show-errors",
    "test:e2e": "esy x knotc.exe ./test/resources/project/src/index.kn",
    "test:e2e:debug": "npm run test:e2e -- -debug",
    "tdd": "sane 'esy build && npm run test' --glob='(src|test)/**/*'"
  },
  "dependencies": {
    "@esy-ocaml/reason": "*",
    "@opam/ANSITerminal": "0.8.2",
    "@opam/alcotest": "1.2.3",
    "@opam/dolog": "6.0.0",
    "@opam/dune": ">=1.6.0",
    "@opam/fileutils": "0.6.3",
    "@opam/fswatch": "11-0.1.0",
    "@opam/fswatch_lwt": "11-0.1.0",
    "@opam/lwt": "5.4.0",
    "@opam/tablecloth-native": "0.0.7",
    "@opam/uutf": "1.0.2"
  },
  "devDependencies": {
    "@opam/merlin": "*",
    "ocaml": "4.10.1002",
    "pesy": "*",
    "refmterr": "*"
  }
}
